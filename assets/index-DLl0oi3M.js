(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();const f=()=>{document.querySelectorAll(".characteristics__item").forEach(l=>{const i=l.querySelector(".characteristics__title"),n=l.querySelector(".characteristics__description");i.addEventListener("click",()=>{n.classList.contains("open")?n.style.height="":n.style.height=n.scrollHeight+"px",i.classList.toggle("active"),n.classList.toggle("open")})})},g="db/dbase.json",S=()=>{const a=document.querySelector(".cross-sell__list"),l=document.querySelector(".cross-sell__add");let i=4,n=1;const t=e=>{a.innerHTML="",e.forEach(o=>{a.insertAdjacentHTML("beforeend",`
      <li>
        <article class="cross-sell__item">
          <img class="cross-sell__image" src="./${o.photo}" alt="${o.id}">
          <h3 class="cross-sell__title">${o.name}</h3>
          <p class="cross-sell__price">${o.price}₽</p>
          <button type="button" class="button button_buy cross-sell__button">Купить</button>
        </article>
      </li>
    `)})},r=(e,o)=>e.slice(0,o),c=e=>{const o=i*n;t(r(e,o)),e.length>o?n++:l.style.display="none"},s=()=>{fetch(g).then(e=>{if(e.ok)return e.json();throw new Error("Данные были получены с ошибкой")}).then(e=>c(e)).catch(e=>console.error(e.message))};l.addEventListener("click",s),s()},b=()=>{const a=document.querySelectorAll(".header-menu__item a"),l=document.querySelector(".card-details__link-characteristics");[...a,l].forEach(n=>{n.addEventListener("click",t=>{t.preventDefault();const r=n.getAttribute("href");r!=="#"&&document.querySelector(r).scrollIntoView({behavior:"smooth",block:"start"})})})},q=()=>{const a=document.querySelector(".card-details__button_delivery"),l=document.querySelector(".card-details__title"),i=document.querySelector(".modal"),n=i.querySelector(".modal__title"),t=i.querySelector(".modal__close"),r=i.querySelector("form");a.addEventListener("click",()=>{i.style.display="flex",n.textContent=l.textContent}),t.addEventListener("click",()=>{i.style.display="none"}),r.addEventListener("submit",c=>{c.preventDefault();const s=i.querySelectorAll(".modal__label"),e={};s.forEach(o=>{const d=o.querySelector("span"),u=o.querySelector("input");e[d.textContent]=u.value}),console.log(e)})},L=()=>{const a=document.querySelectorAll(".card-detail__change"),l=document.querySelector(".card-details__title"),i=document.querySelector(".card-details__price"),n=document.querySelector(".card__image_item"),t=[{name:"Graphite",memory:"128",price:"60000",image:"img/iPhone-graphite.webp"},{name:"Silver",memory:"256",price:"70000",image:"img/iPhone-silver.webp"},{name:"Sierra Blue",memory:"512",price:"80000",image:"img/iPhone-sierra_blue.webp"}],r=s=>{a.forEach(e=>{e.classList.remove("active")}),a[s].classList.add("active")},c=s=>{l.textContent=`Смартфон Apple iPhone 13 Pro ${t[s].memory}GB ${t[s].name}`,i.textContent=`${t[s].price}₽`,n.setAttribute("src",t[s].image)};a.forEach((s,e)=>{s.addEventListener("click",()=>{r(e),c(e)})}),c(0)},v=()=>{(()=>{let a=0,l=0;const i=(c,s,e,o)=>{e.forEach(m=>{m.classList.add("amenu__item")}),o.classList.add("amenu__burger");const[d,u]=n(o);t(c,s,o,d,u),window.addEventListener("resize",()=>{t(c,s,o,d,u)})},n=c=>{const s=document.createElement("button");c.append(s),s.classList.add("amenu__burger-btn"),s.addEventListener("click",()=>{c.classList.toggle("amenu__burger-open")});const e=document.createElement("ul");return c.append(e),e.classList.add("amenu__burger-list"),[s,e]},t=(c,s,e,o,d)=>{const u=s.querySelectorAll(".amenu__item"),m=d.querySelectorAll(".amenu__item"),h=c.offsetWidth;l=e.offsetWidth||l;const p=[...u].reduce((_,y)=>y.offsetWidth+_+parseFloat(getComputedStyle(y).marginRight),0)+l;if(h<p){const _=u[u.length-1];if(_)return a=_.offsetWidth,d.prepend(_),t(c,s,e,o,d)}if(h>p+a*2&&m.length){const _=m[0];return s.append(_),t(c,s,e,o,d)}m.length?e.style.display="":e.style.display="none",r(m,o)},r=(c,s)=>{c.length?s.classList.add("amenu__burger-btn_active"):s.classList.remove("amenu__burger-btn_active")};window.amenu=(c,s,e,o)=>{const d=document.querySelector(c),u=document.querySelector(s),m=document.querySelectorAll(e),h=document.querySelector(o);i(d,u,m,h)}})(),window.amenu(".header__menu",".header-menu__list",".header-menu__item",".header-menu__burger")};f();S();b();q();L();v();
